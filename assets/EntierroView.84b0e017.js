import{j as L,r as o,f as B,o as a,c as s,F as G,g as j,a as e,d as i,h as u,v as r,i as N,b as S,w as A,t as g}from"./index.9f4b444d.js";import{a as p}from"./axios.91e25212.js";const O={class:"main__section"},R=e("h1",null,"Listado de Entierros",-1),z={key:0,class:"lds-facebook"},H=e("div",null,null,-1),J=e("div",null,null,-1),K=e("div",null,null,-1),P=[H,J,K],Q={key:1,class:"data__table"},W=e("div",{class:"table__labels entierro"},[e("p",null,"ID"),e("p",null,"Cementerio"),e("p",null,"Funeraria"),e("p",null,"Eliminar"),e("p",null,"Modificar")],-1),X=["onClick"],Y=e("i",{class:"fa-solid fa-trash"},null,-1),Z=[Y],ee=["onClick"],te=e("i",{class:"fa-solid fa-pen-to-square"},null,-1),le=[te],ne=e("h1",null,"Nueva Ciudad",-1),oe=e("h3",null,"Guardado",-1),ae=e("i",{class:"fa-solid fa-check"},null,-1),se=[oe,ae],ie={class:"new-data__container"},ue={key:0,class:"error"},re=e("h3",null,"Rellena todos los campos",-1),de=[re],ce={class:"btn-table-container"},_e=e("i",{class:"fa-solid fa-house"},null,-1),ve=e("i",{class:"fa-solid fa-plus"},null,-1),pe=[ve],he={__name:"EntierroView",setup(fe){L(n=>({"0d2cc350":U.value+2}));const y=o(),d=o(""),c=o(null),_=o(null),k=o(null),x=o(null),V=o(!1),v=o(null),f=o(null),m=o(null),w=o(),b=o([]),U=o([]);async function h(){const n=await p.get("http://localhost:5000/entierro");b.value=n.data,U.value=Object.keys(b.value[0]).length,console.log(n.data)}async function $(n){try{await p.delete(`http://localhost:5000/entierro/${n}`),h()}catch(t){console.log(t)}}async function D(n){try{await p.put(`http://localhost:5000/entierro/${n}`,{funeraria_idfuneraria:m.value,cementerio:f.value,identierro:v.value}),h()}catch(t){console.log(t)}}function T(n,t,C){w.value.style.animation="enter .5s both",v.value=n,f.value=t,m.value=C}async function E(){try{const n=await p.get("http://localhost:5000/identierro");d.value=n.data[0].id,console.log()}catch(n){console.log(n)}}async function F(){if(d.value&&_.value&&c.value){k.value=!1;try{await p.post("http://localhost:5000/entierro",{funeraria_idfuneraria:_.value,cementerio:c.value,identierro:d.value}),V.value=!0,h()}catch(n){console.log(n)}}else k.value=!0,console.log("Error")}function I(){setTimeout(()=>{E(),_.value="",c.value="",x.value.style.animation="saveLeave .5s both"},300)}return E(),h(),(n,t)=>{const C=B("router-link");return a(),s("section",O,[R,b.value.length?(a(),s("div",Q,[W,(a(!0),s(G,null,j(b.value,(l,M)=>(a(),s("div",{class:"table__row entierro",key:M},[e("p",null,g(l.identierro),1),e("p",null,g(l.cementerio),1),e("p",null,g(l.funeraria_idfuneraria),1),e("button",{title:"Eliminar",class:"link__button row__button",onClick:q=>$(l.identierro)},Z,8,X),e("button",{title:"Modificar",class:"link__button row__button",onClick:q=>T(l.identierro,l.cementerio,l.funeraria_idfuneraria)},le,8,ee)]))),128)),e("div",{class:"modify",ref_key:"modifyTab",ref:w},[e("label",null,[i(" ID "),u(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>v.value=l)},null,512),[[r,v.value]])]),e("label",null,[i(" Cementerio "),u(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=l=>f.value=l)},null,512),[[r,f.value]])]),e("label",null,[i(" Funeraria "),u(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>m.value=l)},null,512),[[r,m.value]])]),e("button",{class:"link__button",onClick:t[3]||(t[3]=l=>D(v.value))}," Guardar "),e("button",{class:"link__button",onClick:t[4]||(t[4]=l=>w.value.style.animation="leave .5s forwards")}," Cancelar ")],512),e("section",{class:"newEntry",ref_key:"newTab",ref:y},[ne,V.value?(a(),s("div",{key:0,class:"guardado",ref_key:"saveMsg",ref:x,onAnimationend:I},se,544)):N("",!0),e("div",ie,[e("label",null,[i(" ID "),u(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=l=>d.value=l),required:""},null,512),[[r,d.value]])]),e("label",null,[i(" Cementerio "),u(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=l=>c.value=l),required:""},null,512),[[r,c.value]])]),e("label",null,[i(" Funeraria "),u(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=l=>_.value=l),required:""},null,512),[[r,_.value]])]),e("button",{class:"link__button",onClick:F},"Guardar"),e("button",{class:"link__button",onClick:t[8]||(t[8]=l=>y.value.style.animation="leaveNew .5s forwards")}," Cancelar "),k.value?(a(),s("div",ue,de)):N("",!0)])],512)])):(a(),s("div",z,P)),e("div",ce,[S(C,{title:"Inicio",to:"/",class:"link__button btn-table home"},{default:A(()=>[_e]),_:1}),e("button",{onClick:t[9]||(t[9]=l=>y.value.style.animation="enterNew .5s forwards"),title:"Nuevo registro",class:"link__button btn-table new"},pe)])])}}};export{he as default};
