import{j as B,r as a,f as G,o as i,c as r,F as j,g as S,a as l,d as n,h as s,v as u,i as N,b as A,w as O,t as g}from"./index.4b7a655a.js";import{a as y}from"./axios.91e25212.js";const R={class:"main__section"},z=l("h1",null,"Listado de Cobros",-1),H={key:0,class:"lds-facebook"},J=l("div",null,null,-1),K=l("div",null,null,-1),Q=l("div",null,null,-1),W=[J,K,Q],X={key:1,class:"data__table"},Y=l("div",{class:"table__labels cobro"},[l("p",null,"ID"),l("p",null,"Fecha"),l("p",null,"Tipo Pago"),l("p",null,"Fallecido"),l("p",null,"Eliminar"),l("p",null,"Modificar")],-1),Z=["onClick"],ll=l("i",{class:"fa-solid fa-trash"},null,-1),el=[ll],ol=["onClick"],tl=l("i",{class:"fa-solid fa-pen-to-square"},null,-1),al=[tl],nl=l("h1",null,"Nueva Ciudad",-1),sl=l("h3",null,"Guardado",-1),ul=l("i",{class:"fa-solid fa-check"},null,-1),il=[sl,ul],rl={class:"new-data__container"},dl={key:0,class:"error"},cl=l("h3",null,"Rellena todos los campos",-1),vl=[cl],_l={class:"btn-table-container"},pl=l("i",{class:"fa-solid fa-house"},null,-1),bl=l("i",{class:"fa-solid fa-plus"},null,-1),fl=[bl],kl={__name:"CobroView",setup(hl){B(t=>({"2bdd9a0a":F.value+2}));const C=a(),d=a(""),c=a(null),v=a(null),_=a(null),w=a(null),U=a(null),D=a(!1),p=a(null),b=a(null),f=a(null),h=a(null),x=a(),m=a([]),F=a([]);async function k(){const t=await y.get("http://localhost:5000/cobro");m.value=t.data,F.value=Object.keys(m.value[0]).length,console.log(t.data)}async function P(t){try{await y.delete(`http://localhost:5000/cobro/${t}`),k()}catch(o){console.log(o)}}async function $(t){try{await y.put(`http://localhost:5000/cobro/${t}`,{idCobro:p.value,fechacobro:b.value,tipoDePago:f.value,fallecido_idfallecido:h.value}),k()}catch(o){console.log(o)}}function I(t,o,V,e){x.value.style.animation="enter .5s both",p.value=t,b.value=o,f.value=V,h.value=e}async function T(){try{const t=await y.get("http://localhost:5000/idcobro");d.value=t.data[0].id,console.log()}catch(t){console.log(t)}}async function q(){if(d.value&&c.value&&v.value&&_.value){w.value=!1;try{await y.post("http://localhost:5000/cobro",{idCobro:d.value,fechacobro:c.value,tipoDePago:v.value,fallecido_idfallecido:_.value}),D.value=!0,k()}catch(t){console.log(t)}}else w.value=!0,console.log("Error")}function E(){setTimeout(()=>{T(),c.value="",_.value="",v.value="",U.value.style.animation="saveLeave .5s both"},300)}return T(),k(),(t,o)=>{const V=G("router-link");return i(),r("section",R,[z,m.value.length?(i(),r("div",X,[Y,(i(!0),r(j,null,S(m.value,(e,M)=>(i(),r("div",{class:"table__row cobro",key:M},[l("p",null,g(e.idCobro),1),l("p",null,g(e.fechacobro),1),l("p",null,g(e.tipoDePago),1),l("p",null,g(e.fallecido_idfallecido),1),l("button",{title:"Eliminar",class:"link__button row__button",onClick:L=>P(e.idCobro)},el,8,Z),l("button",{title:"Modificar",class:"link__button row__button",onClick:L=>I(e.idCobro,e.fechacobro,e.tipoDePago,e.fallecido_idfallecido)},al,8,ol)]))),128)),l("div",{class:"modify",ref_key:"modifyTab",ref:x},[l("label",null,[n(" ID "),s(l("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>p.value=e)},null,512),[[u,p.value]])]),l("label",null,[n(" Fecha "),s(l("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>b.value=e)},null,512),[[u,b.value]])]),l("label",null,[n(" Tipo Pago "),s(l("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=e=>f.value=e)},null,512),[[u,f.value]])]),l("label",null,[n(" Fallecido "),s(l("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=e=>h.value=e)},null,512),[[u,h.value]])]),l("button",{class:"link__button",onClick:o[4]||(o[4]=e=>$(p.value,f.value,b.value,h.value))}," Guardar "),l("button",{class:"link__button",onClick:o[5]||(o[5]=e=>x.value.style.animation="leave .5s forwards")}," Cancelar ")],512),l("section",{class:"newEntry",ref_key:"newTab",ref:C},[nl,D.value?(i(),r("div",{key:0,class:"guardado",ref_key:"saveMsg",ref:U,onAnimationend:E},il,544)):N("",!0),l("div",rl,[l("label",null,[n(" ID "),s(l("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=e=>d.value=e),required:""},null,512),[[u,d.value]])]),l("label",null,[n(" Fecha "),s(l("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=e=>c.value=e),required:""},null,512),[[u,c.value]])]),l("label",null,[n(" Tipo Pago "),s(l("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=e=>v.value=e),required:""},null,512),[[u,v.value]])]),l("label",null,[n(" Fallecido "),s(l("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=e=>_.value=e),required:""},null,512),[[u,_.value]])]),l("button",{class:"link__button",onClick:q},"Guardar"),l("button",{class:"link__button",onClick:o[10]||(o[10]=e=>C.value.style.animation="leaveNew .5s forwards")}," Cancelar "),w.value?(i(),r("div",dl,vl)):N("",!0)])],512)])):(i(),r("div",H,W)),l("div",_l,[A(V,{title:"Inicio",to:"/",class:"link__button btn-table home"},{default:O(()=>[pl]),_:1}),l("button",{onClick:o[11]||(o[11]=e=>C.value.style.animation="enterNew .5s forwards"),title:"Nuevo registro",class:"link__button btn-table new"},fl)])])}}};export{kl as default};
