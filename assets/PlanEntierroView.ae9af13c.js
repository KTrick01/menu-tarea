import{j as P,r as o,f as j,o as u,c as r,F,g as S,a as e,d as a,h as s,v as i,i as D,b as A,w as O,t as w}from"./index.809f4b2f.js";import{a as m}from"./axios.91e25212.js";const R={class:"main__section"},z=e("h1",null,"Listado de Plan Entierros",-1),H={key:0,class:"lds-facebook"},J=e("div",null,null,-1),K=e("div",null,null,-1),Q=e("div",null,null,-1),W=[J,K,Q],X={key:1,class:"data__table"},Y=e("div",{class:"table__labels planentierro"},[e("p",null,"ID"),e("p",null,"Vencimiento"),e("p",null,"Cuotas"),e("p",null,"Entierro"),e("p",null,"Eliminar"),e("p",null,"Modificar")],-1),Z=["onClick"],ee=e("i",{class:"fa-solid fa-trash"},null,-1),te=[ee],le=["onClick"],ne=e("i",{class:"fa-solid fa-pen-to-square"},null,-1),oe=[ne],ae=e("h1",null,"Nueva Ciudad",-1),se=e("h3",null,"Guardado",-1),ie=e("i",{class:"fa-solid fa-check"},null,-1),ue=[se,ie],re={class:"new-data__container"},de={key:0,class:"error"},ce=e("h3",null,"Rellena todos los campos",-1),ve=[ce],_e={class:"btn-table-container"},pe=e("i",{class:"fa-solid fa-house"},null,-1),me=e("i",{class:"fa-solid fa-plus"},null,-1),be=[me],ke={__name:"PlanEntierroView",setup(fe){P(n=>({ad4ac0ac:N.value+2}));const C=o(),d=o(""),c=o(null),v=o(null),_=o(null),x=o(null),E=o(null),U=o(!1),p=o(null),b=o(null),f=o(null),y=o(null),g=o(),h=o([]),N=o([]);async function k(){const n=await m.get("http://localhost:5000/planentierro");h.value=n.data,N.value=Object.keys(h.value[0]).length}async function T(n){try{await m.delete(`http://localhost:5000/planentierro/${n}`),k()}catch(l){console.log(l)}}async function I(n){try{await m.put(`http://localhost:5000/planentierro/${n}`,{Entierro_identierro:y.value,cuotas:f.value,vencimiento:b.value,idplanEntierro:p.value}),k()}catch(l){console.log(l)}}function q(n,l,V,t){g.value.style.animation="enter .5s both",p.value=n,b.value=l,f.value=V,y.value=t}async function $(){try{const n=await m.get("http://localhost:5000/idplan");d.value=n.data[0].id,console.log()}catch(n){console.log(n)}}async function M(){if(d.value&&c.value&&v.value&&_.value){E.value=!1;try{await m.post("http://localhost:5000/planentierro",{Entierro_identierro:c.value,cuotas:v.value,vencimiento:_.value,idplanEntierro:d.value}),U.value=!0,k()}catch(n){console.log(n)}}else E.value=!0,console.log("Error")}function L(){setTimeout(()=>{$(),c.value="",_.value="",v.value="",x.value.style.animation="saveLeave .5s both"},300)}return $(),k(),(n,l)=>{const V=j("router-link");return u(),r("section",R,[z,h.value.length?(u(),r("div",X,[Y,(u(!0),r(F,null,S(h.value,(t,B)=>(u(),r("div",{class:"table__row planentierro",key:B},[e("p",null,w(t.idplanEntierro),1),e("p",null,w(t.vencimiento),1),e("p",null,w(t.cuotas),1),e("p",null,w(t.Entierro_identierro),1),e("button",{title:"Eliminar",class:"link__button row__button",onClick:G=>T(t.idplanEntierro)},te,8,Z),e("button",{title:"Modificar",class:"link__button row__button",onClick:G=>q(t.idplanEntierro,t.vencimiento,t.cuotas,t.Entierro_identierro)},oe,8,le)]))),128)),e("div",{class:"modify",ref_key:"modifyTab",ref:g},[e("label",null,[a(" ID "),s(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=t=>p.value=t)},null,512),[[i,p.value]])]),e("label",null,[a(" Vencimiento "),s(e("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=t=>b.value=t)},null,512),[[i,b.value]])]),e("label",null,[a(" Cuotas "),s(e("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=t=>f.value=t)},null,512),[[i,f.value]])]),e("label",null,[a(" Entierro "),s(e("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=t=>y.value=t)},null,512),[[i,y.value]])]),e("button",{class:"link__button",onClick:l[4]||(l[4]=t=>I(p.value))}," Guardar "),e("button",{class:"link__button",onClick:l[5]||(l[5]=t=>g.value.style.animation="leave .5s forwards")}," Cancelar ")],512),e("section",{class:"newEntry",ref_key:"newTab",ref:C},[ae,U.value?(u(),r("div",{key:0,class:"guardado",ref_key:"saveMsg",ref:x,onAnimationend:L},ue,544)):D("",!0),e("div",re,[e("label",null,[a(" ID "),s(e("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=t=>d.value=t),required:""},null,512),[[i,d.value]])]),e("label",null,[a(" Vencimiento "),s(e("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=t=>_.value=t),required:""},null,512),[[i,_.value]])]),e("label",null,[a(" Cuotas "),s(e("input",{type:"text","onUpdate:modelValue":l[8]||(l[8]=t=>v.value=t),required:""},null,512),[[i,v.value]])]),e("label",null,[a(" Entierro "),s(e("input",{type:"text","onUpdate:modelValue":l[9]||(l[9]=t=>c.value=t),required:""},null,512),[[i,c.value]])]),e("button",{class:"link__button",onClick:M},"Guardar"),e("button",{class:"link__button",onClick:l[10]||(l[10]=t=>C.value.style.animation="leaveNew .5s forwards")}," Cancelar "),E.value?(u(),r("div",de,ve)):D("",!0)])],512)])):(u(),r("div",H,W)),e("div",_e,[A(V,{title:"Inicio",to:"/",class:"link__button btn-table home"},{default:O(()=>[pe]),_:1}),e("button",{onClick:l[11]||(l[11]=t=>C.value.style.animation="enterNew .5s forwards"),title:"Nuevo registro",class:"link__button btn-table new"},be)])])}}};export{ke as default};
