import{j as G,r as a,f as j,o as i,c as r,F as S,g as A,a as e,d as o,h as s,v as u,i as $,b as O,w as R,t as w}from"./index.9f4b444d.js";import{a as p}from"./axios.91e25212.js";const z={class:"main__section"},H=e("h1",null,"Listado de Funerarias",-1),J={key:0,class:"lds-facebook"},K=e("div",null,null,-1),P=e("div",null,null,-1),Q=e("div",null,null,-1),W=[K,P,Q],X={key:1,class:"data__table"},Y=e("div",{class:"table__labels funeraria"},[e("p",null,"ID"),e("p",null,"Telefono"),e("p",null,"Direccion"),e("p",null,"Ciudad"),e("p",null,"Eliminar"),e("p",null,"Modificar")],-1),Z=["onClick"],ee=e("i",{class:"fa-solid fa-trash"},null,-1),le=[ee],te=["onClick"],ne=e("i",{class:"fa-solid fa-pen-to-square"},null,-1),ae=[ne],oe=e("h1",null,"Nueva Ciudad",-1),se=e("h3",null,"Guardado",-1),ue=e("i",{class:"fa-solid fa-check"},null,-1),ie=[se,ue],re={class:"new-data__container"},de={key:0,class:"error"},ce=e("h3",null,"Rellena todos los campos",-1),_e=[ce],ve={class:"btn-table-container"},fe=e("i",{class:"fa-solid fa-house"},null,-1),pe=e("i",{class:"fa-solid fa-plus"},null,-1),be=[pe],ke={__name:"FunerariaView",setup(ye){G(n=>({"4a4e5f8c":T.value+2}));const C=a(),d=a(""),c=a(null),_=a(null),v=a(null),g=a(null),U=a(null),D=a(!1),f=a(null),b=a(null),y=a(null),m=a(null),x=a(),h=a([]),T=a([]);async function k(){const n=await p.get("http://localhost:5000/funeraria");h.value=n.data,T.value=Object.keys(h.value[0]).length,console.log(n.data)}async function I(n){try{await p.delete(`http://localhost:5000/funeraria/${n}`),k()}catch(t){console.log(t)}}async function q(n){try{await p.put(`http://localhost:5000/funeraria/${n}`,{direccion:y.value,ciudad_idciudad:m.value,telefono:b.value,idfuneraria:f.value}),k()}catch(t){console.log(t)}}function E(n,t,V,l){x.value.style.animation="enter .5s both",f.value=n,b.value=t,y.value=V,m.value=l}async function N(){try{const n=await p.get("http://localhost:5000/idfuneraria");d.value=n.data[0].id,console.log()}catch(n){console.log(n)}}async function F(){if(d.value&&_.value&&v.value&&c.value){g.value=!1;try{await p.post("http://localhost:5000/funeraria",{direccion:_.value,ciudad_idciudad:v.value,telefono:c.value,idfuneraria:d.value}),D.value=!0,k()}catch(n){console.log(n)}}else g.value=!0,console.log("Error")}function M(){setTimeout(()=>{N(),_.value="",v.value="",c.value="",U.value.style.animation="saveLeave .5s both"},300)}return N(),k(),(n,t)=>{const V=j("router-link");return i(),r("section",z,[H,h.value.length?(i(),r("div",X,[Y,(i(!0),r(S,null,A(h.value,(l,L)=>(i(),r("div",{class:"table__row funeraria",key:L},[e("p",null,w(l.idfuneraria),1),e("p",null,w(l.telefono),1),e("p",null,w(l.direccion),1),e("p",null,w(l.ciudad_idciudad),1),e("button",{title:"Eliminar",class:"link__button row__button",onClick:B=>I(l.idfuneraria)},le,8,Z),e("button",{title:"Modificar",class:"link__button row__button",onClick:B=>E(l.idfuneraria,l.telefono,l.direccion,l.ciudad_idciudad)},ae,8,te)]))),128)),e("div",{class:"modify",ref_key:"modifyTab",ref:x},[e("label",null,[o(" ID "),s(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>f.value=l)},null,512),[[u,f.value]])]),e("label",null,[o(" Telefono "),s(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=l=>b.value=l)},null,512),[[u,b.value]])]),e("label",null,[o(" Direccion "),s(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>y.value=l)},null,512),[[u,y.value]])]),e("label",null,[o(" Ciudad "),s(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=l=>m.value=l)},null,512),[[u,m.value]])]),e("button",{class:"link__button",onClick:t[4]||(t[4]=l=>q(f.value))}," Guardar "),e("button",{class:"link__button",onClick:t[5]||(t[5]=l=>x.value.style.animation="leave .5s forwards")}," Cancelar ")],512),e("section",{class:"newEntry",ref_key:"newTab",ref:C},[oe,D.value?(i(),r("div",{key:0,class:"guardado",ref_key:"saveMsg",ref:U,onAnimationend:M},ie,544)):$("",!0),e("div",re,[e("label",null,[o(" ID "),s(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=l=>d.value=l),required:""},null,512),[[u,d.value]])]),e("label",null,[o(" Telefono "),s(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=l=>c.value=l),required:""},null,512),[[u,c.value]])]),e("label",null,[o(" Direccion "),s(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=l=>_.value=l),required:""},null,512),[[u,_.value]])]),e("label",null,[o(" Ciudad "),s(e("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=l=>v.value=l),required:""},null,512),[[u,v.value]])]),e("button",{class:"link__button",onClick:F},"Guardar"),e("button",{class:"link__button",onClick:t[10]||(t[10]=l=>C.value.style.animation="leaveNew .5s forwards")}," Cancelar "),g.value?(i(),r("div",de,_e)):$("",!0)])],512)])):(i(),r("div",J,W)),e("div",ve,[O(V,{title:"Inicio",to:"/",class:"link__button btn-table home"},{default:R(()=>[fe]),_:1}),e("button",{onClick:t[11]||(t[11]=l=>C.value.style.animation="enterNew .5s forwards"),title:"Nuevo registro",class:"link__button btn-table new"},be)])])}}};export{ke as default};
