import{j as X,r as o,f as Y,o as d,c as r,F as Z,g as ll,a as l,d as n,h as a,v as u,i as O,b as el,w as tl,k as ol,t as s}from"./index.9f4b444d.js";import{a as C}from"./axios.91e25212.js";const nl={class:"main__section"},al=l("h1",null,"Listado de Fallecidos",-1),ul={key:0,class:"lds-facebook"},il=l("div",null,null,-1),sl=l("div",null,null,-1),dl=l("div",null,null,-1),rl=[il,sl,dl],vl={key:1,class:"data__table"},pl=ol('<div class="table__labels fallecido"><p>ID</p><p>C.I</p><p>Nombre</p><p>Apellido</p><p>Direccion</p><p>Sexo</p><p>Estado Civil</p><p>Ciudad</p><p>Entierro</p><p>Eliminar</p><p>Modificar</p></div>',1),cl=["onClick"],_l=l("i",{class:"fa-solid fa-trash"},null,-1),bl=[_l],ml=["onClick"],fl=l("i",{class:"fa-solid fa-pen-to-square"},null,-1),yl=[fl],xl=l("h1",null,"Nueva Ciudad",-1),kl=l("h3",null,"Guardado",-1),Cl=l("i",{class:"fa-solid fa-check"},null,-1),Ul=[kl,Cl],wl={class:"new-data__container"},Vl={key:0,class:"error"},gl=l("h3",null,"Rellena todos los campos",-1),El=[gl],hl={class:"btn-table-container"},Nl=l("i",{class:"fa-solid fa-house"},null,-1),Dl=l("i",{class:"fa-solid fa-plus"},null,-1),Il=[Dl],Al={__name:"FallecidoView",setup($l){X(i=>({"3db52d18":j.value+2}));const S=o(),v=o(""),p=o(null),c=o(null),_=o(null),b=o(null),m=o(null),f=o(null),y=o(null),x=o(null);o(null);const T=o(null),B=o(null),G=o(!1),k=o(null),U=o(null),w=o(null),V=o(null),g=o(null),E=o(null),h=o(null),N=o(null),D=o(null),A=o(),I=o([]),j=o([]);async function $(){const i=await C.get("http://localhost:5000/fallecido");I.value=i.data,j.value=Object.keys(I.value[0]).length,console.log(i.data)}async function R(i){try{await C.delete(`http://localhost:5000/fallecido/${i}`),$()}catch(t){console.log(t)}}async function z(i){try{await C.put(`http://localhost:5000/fallecido/${i}`,{cinumero:U.value,nombre:w.value,apellido:V.value,direccion:E.value,sexo_idsexo:h.value,estado_civil_idestado_civil:N.value,ciudad_idciudad:g.value,Entierro_identierro:D.value,idfallecido:k.value}),$()}catch(t){console.log(t)}}function H(i,t,F,e,M,L,P,Q,W){A.value.style.animation="enter .5s both",k.value=i,U.value=t,w.value=F,V.value=e,g.value=Q,E.value=M,h.value=L,N.value=P,D.value=W}async function q(){try{const i=await C.get("http://localhost:5000/idfallecido");v.value=i.data[0].id,console.log()}catch(i){console.log(i)}}async function J(){if(v.value&&m.value&&b.value&&y.value&&x.value&&c.value&&_.value&&f.value&&p.value){T.value=!1;try{await C.post("http://localhost:5000/fallecido",{cinumero:p.value,nombre:c.value,apellido:_.value,direccion:f.value,sexo_idsexo:b.value,estado_civil_idestado_civil:y.value,ciudad_idciudad:m.value,Entierro_identierro:x.value,idfallecido:v.value}),G.value=!0,$()}catch(i){console.log(i)}}else T.value=!0,console.log("Error")}function K(){setTimeout(()=>{q(),p.value="",c.value="",_.value="",m.value="",b.value="",y.value="",f.value="",x.value="",B.value.style.animation="saveLeave .5s both"},300)}return q(),$(),(i,t)=>{const F=Y("router-link");return d(),r("section",nl,[al,I.value.length?(d(),r("div",vl,[pl,(d(!0),r(Z,null,ll(I.value,(e,M)=>(d(),r("div",{class:"table__row fallecido",key:M},[l("p",null,s(e.idfallecido),1),l("p",null,s(e.cinumero),1),l("p",null,s(e.nombre),1),l("p",null,s(e.apellido),1),l("p",null,s(e.direccion),1),l("p",null,s(e.sexo_idsexo),1),l("p",null,s(e.estado_civil_idestado_civil),1),l("p",null,s(e.ciudad_idciudad),1),l("p",null,s(e.Entierro_identierro),1),l("button",{title:"Eliminar",class:"link__button row__button",onClick:L=>R(e.idfallecido)},bl,8,cl),l("button",{title:"Modificar",class:"link__button row__button",onClick:L=>H(e.idfallecido,e.cinumero,e.nombre,e.apellido,e.direccion,e.sexo_idsexo,e.estado_civil_idestado_civil,e.ciudad_idciudad,e.Entierro_identierro)},yl,8,ml)]))),128)),l("div",{class:"modify",ref_key:"modifyTab",ref:A},[l("label",null,[n(" ID "),a(l("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>k.value=e)},null,512),[[u,k.value]])]),l("label",null,[n(" C.I "),a(l("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>U.value=e)},null,512),[[u,U.value]])]),l("label",null,[n(" Nombre "),a(l("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>w.value=e)},null,512),[[u,w.value]])]),l("label",null,[n(" Apellido "),a(l("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>V.value=e)},null,512),[[u,V.value]])]),l("label",null,[n(" Direccion "),a(l("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>E.value=e)},null,512),[[u,E.value]])]),l("label",null,[n(" Sexo "),a(l("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>h.value=e)},null,512),[[u,h.value]])]),l("label",null,[n(" Estado civil "),a(l("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>N.value=e)},null,512),[[u,N.value]])]),l("label",null,[n(" Ciudad "),a(l("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>g.value=e)},null,512),[[u,g.value]])]),l("label",null,[n(" Entierro "),a(l("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>D.value=e)},null,512),[[u,D.value]])]),l("button",{class:"link__button",onClick:t[9]||(t[9]=e=>z(k.value))}," Guardar "),l("button",{class:"link__button",onClick:t[10]||(t[10]=e=>A.value.style.animation="leave .5s forwards")}," Cancelar ")],512),l("div",{class:"newEntry",ref_key:"newTab",ref:S},[xl,G.value?(d(),r("div",{key:0,class:"guardado",ref_key:"saveMsg",ref:B,onAnimationend:K},Ul,544)):O("",!0),l("div",wl,[l("label",null,[n(" ID "),a(l("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>v.value=e),required:""},null,512),[[u,v.value]])]),l("label",null,[n(" C.I "),a(l("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>p.value=e)},null,512),[[u,p.value]])]),l("label",null,[n(" Nombre "),a(l("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>c.value=e)},null,512),[[u,c.value]])]),l("label",null,[n(" Apellido "),a(l("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>_.value=e)},null,512),[[u,_.value]])]),l("label",null,[n(" Direccion "),a(l("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=e=>f.value=e)},null,512),[[u,f.value]])]),l("label",null,[n(" Sexo "),a(l("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>b.value=e)},null,512),[[u,b.value]])]),l("label",null,[n(" Estado civil "),a(l("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>y.value=e)},null,512),[[u,y.value]])]),l("label",null,[n(" Ciudad "),a(l("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=e=>m.value=e)},null,512),[[u,m.value]])]),l("label",null,[n(" Entierro "),a(l("input",{type:"text","onUpdate:modelValue":t[19]||(t[19]=e=>x.value=e)},null,512),[[u,x.value]])]),l("button",{class:"link__button",onClick:J},"Guardar"),l("button",{class:"link__button",onClick:t[20]||(t[20]=e=>S.value.style.animation="leaveNew .5s forwards")}," Cancelar "),T.value?(d(),r("div",Vl,El)):O("",!0)])],512)])):(d(),r("div",ul,rl)),l("div",hl,[el(F,{title:"Inicio",to:"/",class:"link__button btn-table home"},{default:tl(()=>[Nl]),_:1}),l("button",{onClick:t[21]||(t[21]=e=>S.value.style.animation="enterNew .5s forwards"),title:"Nuevo registro",class:"link__button btn-table new"},Il)])])}}};export{Al as default};
